@page "/account/password-reset"
@using Blazored.FluentValidation
@using Microsoft.AspNetCore.Components.Forms
@using TwilightImperiumUltimate.Web.Components.Shared.Controls
@using TwilightImperiumUltimate.Web.Components.Shared.Text
@using TwilightImperiumUltimate.Web.Resources

<PageTitle>@Strings.Page_AccountPasswordReset</PageTitle>

<Page>
    <FlexColumnCenteredContainer>
        <FlexRowContainer JustifyContent="Enums.JustifyContent.Center" Width="40">
            <Label Text="@Strings.Password_ResetTitle" FontSize="36" CenterText="true" />
        </FlexRowContainer>

        @if(_passwordResetFailed)
        {
            <VerticalSpace Height="20" />
            <Label Text="@_errorMessage" CenterText="true" FontSize="24" TextColor="TextColor.Red" />
            <VerticalSpace Height="20" />
        }
        else
        {
            <VerticalSpace Height="50" />
        }

        <EditForm Model="@ResetPasswordModel" OnValidSubmit="ResetPassword" OnInvalidSubmit="ResetPasswordFailed" style="width: 100%;">
            <FluentValidationValidator />

            <FlexColumnCenteredContainer>
                <FlexRowContainer Width="40">
                    <Label Text="@Strings.Register_Email" Width="50" CenterText="true"/>
                </FlexRowContainer>

                <VerticalSpace Height="20" />

                <FlexRowContainer Width="40">
                    <RadzenTextBox Placeholder="@Strings.Register_Email"
                                    @bind-Value="ResetPasswordModel.Email"
                                    class="w-20 flex-row title white handel" />
                </FlexRowContainer>

                <VerticalSpace Height="10" />

                <ValidationMessage For="@(() => ResetPasswordModel.Email)" class="handel shadow white" style="color:red;" />

                <VerticalSpace Height="50" />

                <FlexRowContainer JustifyContent="Enums.JustifyContent.Center" Width="40">
                    <Label Text="@Strings.ResetPassword_NewPassword" Width="50" CenterText="true" />
                </FlexRowContainer>

                <VerticalSpace Height="20" />

                <FlexRowContainer JustifyContent="Enums.JustifyContent.Center" Width="40">
                    <RadzenPassword @bind-Value="ResetPasswordModel.NewPassword"
                                    type="password"
                                    class="flex-row title white handel"
                                    placeholder="@Strings.ResetPassword_NewPasswordPlaceholder" />
                </FlexRowContainer>

                <VerticalSpace Height="10" />

                <ValidationMessage For="@(() => ResetPasswordModel.NewPassword)" class="handel shadow white" style="color:red;"/>

                <VerticalSpace Height="50" />

                <FlexRowContainer JustifyContent="Enums.JustifyContent.Center" Width="40">
                    <Label Text="@Strings.ResetPassword_ConfirmNewPassword" Width="50" CenterText="true" />
                </FlexRowContainer>

                <VerticalSpace Height="20" />

                <FlexRowContainer JustifyContent="Enums.JustifyContent.Center" Width="40">
                    <RadzenPassword @bind-Value="ResetPasswordModel.ConfirmNewPassword"
                                    type="password"
                                    class="flex-row title white handel"
                                    placeholder="@Strings.ResetPassword_NewPasswordPlaceholder" />
                </FlexRowContainer>

                <VerticalSpace Height="10" />

                <ValidationMessage For="@(() => ResetPasswordModel.ConfirmNewPassword)" class="handel shadow white" style="color:red;" />

                <VerticalSpace Height="50" />

                <FlexRowContainer Width="40">
                    <Label Text="@Strings.Password_ResetCode" Width="50" CenterText="true" />
                </FlexRowContainer>

                <VerticalSpace Height="20" />

                <FlexRowContainer Width="40">

                    <RadzenTextBox Placeholder="@Strings.Password_ResetCode"
                                    @bind-Value="ResetPasswordModel.ResetCode"
                                    class="w-20 flex-row title white handel"
                                    Disabled="true" />
                </FlexRowContainer>

                <VerticalSpace Height="10" />

                <ValidationMessage For="@(() => ResetPasswordModel.ResetCode)" class="handel shadow white" style="color: red;" />

                <VerticalSpace Height="50" />

                <FlexRowContainer JustifyContent="Enums.JustifyContent.Center" Width="50">
                    <Button ButtonText="@Strings.Password_PasswordReset" CssClass="button" ButtonType="ButtonType.Submit" IsDisabled="GetDisabledState()" Width="100"/>
                </FlexRowContainer>

            </FlexColumnCenteredContainer>
        </EditForm>
    </FlexColumnCenteredContainer>
</Page>
